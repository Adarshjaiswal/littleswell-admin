import{_ as H}from"./MoreBtn-010b8dd5.js";import{_ as K}from"./AppDateTimePicker-0e3600b8.js";import{j as c,a2 as A,A as T,y as Z,p as s,o as f,c as b,n as a,w as n,H as h,l as e,G as J,Q as D,V as w,F as W,a as X,K as Y,L as ee,x as r,D as te,r as B,Z as E,b as ae}from"./main-edf7a918.js";import{u as le}from"./useInvoiceStore-4b4d5817.js";import{a as oe}from"./formatters-33197472.js";import{d as I,V as L}from"./VCard-168b6136.js";import{V as se,a as N}from"./VRow-95e48620.js";import{V as P}from"./VSelect-295f5731.js";import{V as ne}from"./VSpacer-cd3d7120.js";import{V as ie}from"./VTextField-457ca700.js";import{V as R}from"./VDivider-1a3d52ac.js";import{V as re}from"./VTable-9e2d2e89.js";import{V as U}from"./VCheckbox-8fbf8b3f.js";import{V as ce}from"./VPagination-efdd592b.js";import{V as de}from"./VTooltip-fcb72b0e.js";import{V as z}from"./VAvatar-a0e54144.js";import{V as ue}from"./VImg-c738de9a.js";import{V as me}from"./VChip-743205b4.js";import"./VMenu-2b6a4453.js";import"./forwardRefs-8f7055de.js";import"./VOverlay-729d98f7.js";import"./lazy-21e4bc45.js";import"./easing-6b01f2d6.js";import"./transition-a51ab259.js";import"./dialog-transition-9ffc684e.js";import"./VList-c8c5940d.js";import"./VField-45dcdeb2.js";import"./VInput-69f8a183.js";import"./form-130b39c8.js";import"./index-61e4df1a.js";import"./VCheckboxBtn-11469801.js";import"./VSelectionControl-e31052c4.js";/* empty css                   */import"./VCounter-4c0bd440.js";const pe={key:0},ve={class:"me-3"},_e={class:"d-flex align-center flex-wrap gap-6"},fe={class:"invoice-list-search"},he={scope:"col",class:"text-center"},xe={style:{width:"1rem"}},Ve=e("th",{scope:"col"}," #ID ",-1),ge={scope:"col"},be=e("th",{scope:"col"}," CLIENT ",-1),we=e("th",{scope:"col"}," TOTAL ",-1),ye=e("th",{scope:"col"}," DATE ",-1),De=e("th",{scope:"col"}," BALANCE ",-1),Ie=e("th",{scope:"col"}," ACTIONS ",-1),Pe={style:{width:"1rem"}},ke={class:"mb-0"},Se={class:"mb-0"},Ce={class:"mb-0"},$e={class:"d-flex align-center"},Ae={key:1,class:"text-sm"},Te={class:"d-flex flex-column"},Be={class:"text-sm font-weight-medium mb-0"},Ee={class:"text-caption"},Le={class:"text-center"},Ne={style:{width:"8rem"}},Re=e("tr",null,[e("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),Ue=[Re],ze={class:"d-flex align-center",style:{width:"171px"}},Fe=e("span",{class:"text-no-wrap text-sm me-3"},"Rows per page:",-1),je={class:"d-flex align-center"},Oe={class:"text-sm font-weight-regular"},Dt={__name:"index",setup(Me){const F=le(),x=c(""),_=c(""),V=c(),p=c(10),d=c(1),g=c(1),k=c(0),u=c([]),i=c([]),v=c(!1);A(()=>{const[l,o]=_.value?_.value.split("to"):"";F.fetchInvoices({q:x.value,status:V.value,perPage:p.value,currentPage:d.value,startDate:l,endDate:o}).then(m=>{u.value=m.data.invoices,g.value=m.data.totalPage,k.value=m.data.totalInvoices}).catch(m=>{console.log(m)})}),A(()=>{d.value>g.value&&(d.value=g.value)});const j=T(()=>{const l=u.value.length?(d.value-1)*p.value+1:0,o=u.value.length+(d.value-1)*p.value;return`${l}-${o} of ${k.value}`}),S=(l,o)=>l===o?{status:"Unpaid",chip:{color:"error"}}:l===0?{status:"Paid",chip:{color:"success"}}:{status:l,chip:{variant:"text"}},y=l=>l==="Partial Payment"?{variant:"warning",icon:"bx-adjust"}:l==="Paid"?{variant:"success",icon:"bx-check"}:l==="Downloaded"?{variant:"info",icon:"bx-down-arrow-alt"}:l==="Draft"?{variant:"secondary",icon:"bx-save"}:l==="Sent"?{variant:"primary",icon:"bx-envelope"}:l==="Past Due"?{variant:"error",icon:"bx-error-circle"}:{variant:"secondary",icon:"bx-x"},O=()=>{v.value=!v.value,v.value?u.value.forEach(l=>{i.value.includes(`check${l.id}`)||i.value.push(`check${l.id}`)}):i.value=[]};Z(i,()=>{i.value.length||(v.value=!1)},{deep:!0});const M=l=>{if(i.value.includes(l)){const o=i.value.indexOf(l);i.value.splice(o,1)}else i.value.push(l),v.value=!0},Q=T(()=>l=>[{title:"Download",value:"download",prependIcon:"bx-download"},{title:"Edit",value:"edit",prependIcon:"bx-pencil",to:{name:"apps-invoice-edit-id",params:{id:l}}},{title:"Duplicate",value:"duplicate",prependIcon:"bx-layer"}]);return(l,o)=>{const m=K,q=B("RouterLink"),C=B("IconBtn"),G=H;return s(u)?(f(),b("section",pe,[a(L,{title:"Filters",class:"mb-6"},{default:n(()=>[a(I,null,{default:n(()=>[a(se,null,{default:n(()=>[a(N,{cols:"12",md:"6"},{default:n(()=>[a(P,{modelValue:s(V),"onUpdate:modelValue":o[0]||(o[0]=t=>h(V)?V.value=t:null),label:"Select Status",clearable:"","clear-icon":"bx-x",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])]),_:1}),a(N,{cols:"12",md:"6"},{default:n(()=>[a(m,{modelValue:s(_),"onUpdate:modelValue":o[1]||(o[1]=t=>h(_)?_.value=t:null),label:"Invoice Date","clear-icon":"bx-x",clearable:"",config:{mode:"range"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(L,{id:"invoice-list"},{default:n(()=>[a(I,{class:"d-flex align-center flex-wrap gap-4"},{default:n(()=>[e("div",ve,[a(P,{density:"compact",label:"Actions",items:["Delete","Edit","Send"],class:"invoice-list-actions",disabled:!s(i).length},null,8,["disabled"])]),a(ne),e("div",_e,[e("div",fe,[a(ie,{modelValue:s(x),"onUpdate:modelValue":o[2]||(o[2]=t=>h(x)?x.value=t:null),placeholder:"Search Invoice",density:"compact"},null,8,["modelValue"])]),a(J,{to:{name:"apps-invoice-add"}},{default:n(()=>[D(" Create invoice ")]),_:1})])]),_:1}),a(R),a(re,{class:"text-no-wrap",height:"27rem","fixed-header":""},{default:n(()=>[e("thead",null,[e("tr",null,[e("th",he,[e("div",xe,[a(U,{"model-value":s(v),indeterminate:s(u).length!==s(i).length&&!!s(i).length,onClick:O},null,8,["model-value","indeterminate"])])]),Ve,e("th",ge,[a(w,{icon:"bx-trending-up"})]),be,we,ye,De,Ie])]),e("tbody",null,[(f(!0),b(W,null,X(s(u),t=>(f(),b("tr",{key:t.id},[e("td",null,[e("div",Pe,[a(U,{id:`check${t.id}`,"model-value":s(i).includes(`check${t.id}`),onClick:$=>M(`check${t.id}`)},null,8,["id","model-value","onClick"])])]),e("td",null,[a(q,{to:{name:"apps-invoice-preview-id",params:{id:t.id}}},{default:n(()=>[D(" #"+r(t.id),1)]),_:2},1032,["to"])]),e("td",null,[a(de,null,{activator:n(({props:$})=>[a(z,E({size:34},$,{color:y(t.invoiceStatus).variant,variant:"tonal"}),{default:n(()=>[a(w,{size:20,icon:y(t.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:n(()=>[e("p",ke,r(t.invoiceStatus),1),e("p",Se," Balance: "+r(t.balance),1),e("p",Ce," Due date: "+r(t.dueDate),1)]),_:2},1024)]),e("td",null,[e("div",$e,[a(z,{size:"34",color:y(t.invoiceStatus).variant,variant:"tonal",class:"me-3"},{default:n(()=>[t.avatar.length?(f(),ae(ue,{key:0,src:t.avatar},null,8,["src"])):(f(),b("span",Ae,r(s(oe)(t.client.name)),1))]),_:2},1032,["color"]),e("div",Te,[e("h6",Be,r(t.client.name),1),e("span",Ee,r(t.client.companyEmail),1)])])]),e("td",null," $"+r(t.total),1),e("td",null,r(t.issuedDate),1),e("td",Le,[a(me,E(S(t.balance,t.total).chip,{density:"compact"}),{default:n(()=>[D(r(S(t.balance,t.total).status),1)]),_:2},1040)]),e("td",Ne,[a(C,null,{default:n(()=>[a(w,{icon:"bx-trash-alt"})]),_:1}),a(C,{to:{name:"apps-invoice-preview-id",params:{id:t.id}}},{default:n(()=>[a(w,{icon:"bx-show"})]),_:2},1032,["to"]),a(G,{"menu-list":s(Q)(t.id),"item-props":""},null,8,["menu-list"])])]))),128))]),Y(e("tfoot",null,Ue,512),[[ee,!s(u).length]])]),_:1}),a(R),a(I,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:n(()=>[e("div",ze,[Fe,a(P,{modelValue:s(p),"onUpdate:modelValue":o[3]||(o[3]=t=>h(p)?p.value=t:null),density:"compact",class:"small-select",variant:"plain",items:[10,20,30,50]},null,8,["modelValue"])]),e("div",je,[e("h6",Oe,r(s(j)),1)]),a(ce,{modelValue:s(d),"onUpdate:modelValue":o[4]||(o[4]=t=>h(d)?d.value=t:null),size:"small","total-visible":1,length:s(g),onNext:o[5]||(o[5]=t=>i.value=[]),onPrev:o[6]||(o[6]=t=>i.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1})])):te("",!0)}}};export{Dt as default};
