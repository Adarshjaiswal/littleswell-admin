import{m as U,f as $,V as j}from"./VTextField-457ca700.js";import{f as H}from"./forwardRefs-8f7055de.js";import{au as K,ao as q,aK as z,ag as Q,an as Z,az as G,j as x,aq as T,A as y,am as J,n as o,F as W,Z as C,aL as X,Q as Y,at as ee}from"./main-edf7a918.js";import{m as ae,u as le,V as te,a as F}from"./VList-c8c5940d.js";import{m as ne}from"./transition-a51ab259.js";import{u as oe}from"./form-130b39c8.js";import{V as ue}from"./dialog-transition-9ffc684e.js";import{V as se}from"./VMenu-2b6a4453.js";import{V as ie}from"./VCheckboxBtn-11469801.js";import{V as re}from"./VChip-743205b4.js";const ce=K({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:q,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:z},...ae({itemChildren:!1})},"v-select"),ke=Q()({name:"VSelect",props:{...ce(),...Z(U({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ne({transition:{component:ue}})},emits:{"update:modelValue":a=>!0,"update:menu":a=>!0},setup(a,B){let{slots:t}=B;const{t:S}=G(),g=x(),D=x(),k=T(a,"menu"),u=y({get:()=>k.value,set:e=>{var l;k.value&&!e&&((l=D.value)!=null&&l.Î¨openChildren)||(k.value=e)}}),{items:v,transformIn:_,transformOut:A}=le(a),s=T(a,"modelValue",[],e=>_(ee(e)),e=>{const l=A(e);return a.multiple?l:l[0]??null}),d=oe(),p=y(()=>s.value.map(e=>v.value.find(l=>a.valueComparator(l.value,e.value))||e)),I=y(()=>p.value.map(e=>e.props.value)),w=y(()=>a.hideSelected?v.value.filter(e=>!p.value.some(l=>l===e)):v.value),m=x();function R(e){a.openOnClear&&(u.value=!0)}function b(){a.hideNoData&&!v.value.length||a.readonly||d!=null&&d.isReadonly.value||(u.value=!u.value)}function E(e){var l,i,n,r;a.readonly||d!=null&&d.isReadonly.value||(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(u.value=!0),["Escape","Tab"].includes(e.key)&&(u.value=!1),e.key==="ArrowDown"?(l=m.value)==null||l.focus("next"):e.key==="ArrowUp"?(i=m.value)==null||i.focus("prev"):e.key==="Home"?(n=m.value)==null||n.focus("first"):e.key==="End"&&((r=m.value)==null||r.focus("last")))}function V(e){if(a.multiple){const l=I.value.findIndex(i=>a.valueComparator(i,e.value));if(l===-1)s.value=[...s.value,e];else{const i=[...s.value];i.splice(l,1),s.value=i}}else s.value=[e],u.value=!1}function M(e){var l;(l=m.value)!=null&&l.$el.contains(e.relatedTarget)||(u.value=!1)}function N(e){var l;e.relatedTarget==null&&((l=g.value)==null||l.focus())}return J(()=>{const e=!!(a.chips||t.chip),l=!!(!a.hideNoData||w.value.length||t.prepend||t.append||t["no-data"]),[i]=$(a);return o(j,C({ref:g},i,{modelValue:s.value.map(n=>n.props.value).join(", "),"onUpdate:modelValue":n=>{n==null&&(s.value=[])},validationValue:s.externalValue,dirty:s.value.length>0,class:["v-select",{"v-select--active-menu":u.value,"v-select--chips":!!a.chips,[`v-select--${a.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length}],appendInnerIcon:a.menuIcon,readonly:!0,"onClick:clear":R,"onMousedown:control":b,onBlur:M,onKeydown:E}),{...t,default:()=>o(W,null,[o(se,C({ref:D,modelValue:u.value,"onUpdate:modelValue":n=>u.value=n,activator:"parent",contentClass:"v-select__content",eager:a.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:a.transition},a.menuProps),{default:()=>[l&&o(te,{ref:m,selected:I.value,selectStrategy:a.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onFocusout:N},{default:()=>{var n,r,h;return[!w.value.length&&!a.hideNoData&&(((n=t["no-data"])==null?void 0:n.call(t))??o(F,{title:S(a.noDataText)},null)),(r=t["prepend-item"])==null?void 0:r.call(t),w.value.map((c,f)=>{var P;return t.item?(P=t.item)==null?void 0:P.call(t,{item:c,index:f,props:C(c.props,{onClick:()=>V(c)})}):o(F,C({key:f},c.props,{onClick:()=>V(c)}),{prepend:O=>{let{isSelected:L}=O;return a.multiple&&!a.hideSelected?o(ie,{modelValue:L,ripple:!1},null):void 0}})}),(h=t["append-item"])==null?void 0:h.call(t)]}})]}),p.value.map((n,r)=>{function h(f){f.stopPropagation(),f.preventDefault(),V(n)}const c={"onClick:close":h,modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:n.value,class:"v-select__selection"},[e?o(X,{defaults:{VChip:{closable:a.closableChips,size:"small",text:n.title}}},{default:()=>[t.chip?t.chip({item:n,index:r,props:c}):o(re,c,null)]}):t.selection?t.selection({item:n,index:r}):o("span",{class:"v-select__selection-text"},[n.title,a.multiple&&r<p.value.length-1&&o("span",{class:"v-select__selection-comma"},[Y(",")])])])})])})}),H({menu:u,select:V},g)}});export{ke as V,ce as m};
