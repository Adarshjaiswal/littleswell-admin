import{j as o,a2 as C,A as B,o as y,c as w,n as l,w as i,p as s,H as _,Q as D,l as e,G as F,F as L,a as Q,K as E,L as I,aH as H,x as V,V as q}from"./main-edf7a918.js";import G from"./createJobDrawer-14431729.js";import{u as K}from"./usejobStore-b9c48a98.js";import{V as P}from"./VSnackbar-e7b37846.js";import{a as j,V as M}from"./VRow-95e48620.js";import{V as W,d as N}from"./VCard-168b6136.js";import{V as U}from"./VDivider-1a3d52ac.js";import{V as X}from"./VSpacer-cd3d7120.js";import{V as Y}from"./VTextField-457ca700.js";import{V as Z}from"./VTable-9e2d2e89.js";import{V as ee}from"./VSelect-295f5731.js";import{V as te}from"./VPagination-efdd592b.js";import"./AppDrawerHeaderSection-db9e3bc1.js";import"./validators-50c95554.js";import"./index-61e4df1a.js";import"./VForm-3ec30119.js";import"./form-130b39c8.js";import"./forwardRefs-8f7055de.js";import"./VSwitch-2dd77126.js";import"./VSelectionControl-e31052c4.js";import"./VInput-69f8a183.js";import"./transition-a51ab259.js";import"./VNavigationDrawer-01c3b33a.js";import"./ssrBoot-b343f022.js";import"./VAvatar-a0e54144.js";import"./VImg-c738de9a.js";/* empty css                   */import"./VField-45dcdeb2.js";import"./easing-6b01f2d6.js";import"./VCounter-4c0bd440.js";import"./VList-c8c5940d.js";import"./dialog-transition-9ffc684e.js";import"./VMenu-2b6a4453.js";import"./VOverlay-729d98f7.js";import"./lazy-21e4bc45.js";import"./VCheckboxBtn-11469801.js";import"./VChip-743205b4.js";const ae={class:"app-user-search-filter d-flex align-center"},le=e("thead",null,[e("tr",null,[e("th",{scope:"col",style:{"inline-size":"48px"}}," SR. NO. "),e("th",{scope:"col"}," Vaccine Name "),e("th",{scope:"col"}," Description "),e("th",{scope:"col"}," Time "),e("th",{scope:"col"}," Created Date "),e("th",{scope:"col"}," Actions ")])],-1),oe={class:"text-capitalize text-base"},se={class:"text-capitalize text-base"},ne={class:"text-capitalize text-base"},re={class:"text-capitalize text-base"},ie={class:"text-capitalize text-high-emphasis"},ce={class:"text-base"},ue={class:"text-center",style:{"inline-size":"80px"}},de={key:0,colspan:"11",class:"text-center text-body-1"},pe={key:1,colspan:"11",class:"text-center text-body-1"},me={class:"d-flex align-center",style:{"inline-size":"171px"}},ve=e("span",{class:"text-no-wrap text-sm me-3"},"Rows per page:",-1),fe={class:"d-flex align-center"},_e={class:"text-sm text-no-wrap me-3"},Ve={class:"d-flex align-center"},at={__name:"index",setup(he){const S=K(),b=o(""),u=o(10),d=o(1),p=o(1),J=o(1),z=o(0),m=o([]),c=o(!1),v=o(!1),f=o(d.value);o(!1),o([]),o([]),o([]),o([]),o(null);let h=o(!1);const R=n=>{const a={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(n).toLocaleString("en-US",a)},k=(n,a)=>{h.value=!0;const t=n.toString(),g={searchQuery:b.value};S.fetchJobs(t,a,g).then(r=>{console.log(r.data),m.value=r.data.vaccine_data.data,J.value=r.data.vaccine_data.current_page,p.value=r.data.vaccine_data.last_page,z.value=r.data.vaccine_data.total,r.status===200?v.value=!0:c.value=!0,console.log(m.length)}).catch(r=>{c.value=!0}).finally(()=>h.value=!1)};C(()=>{k(f.value,u.value)}),C(()=>{d.value>p.value&&(d.value=p.value)});const x=o(!1);C(()=>{d.value>p.value&&(d.value=p.value)}),B(()=>{const n=m.value.length?(d.value-1)*u.value+1:0,a=m.value.length+(d.value-1)*u.value;return`${n}-${a} of ${z.value}`});const T=async n=>{console.log(n);const{vaccine_name:a,description:t,vac_time:g,time_value:r,status:O}=n;try{(await S.addJob(a,t,g,r,O)).status===201?(v.value=!0,x.value=!1,k(f.value,u.value)):c.value=!0}catch{c.value=!0}},$=async n=>{if(window.confirm("Are you sure you want to delete this Vaccine?")){h.value=!0;try{(await S.deleteJob(n)).status===200?(k(f.value,u.value),v.value=!0):c.value=!0}catch(t){console.error("Failed to delete Vaccine:",t),c.value=!0}finally{h.value=!1}}};return(n,a)=>(y(),w("section",null,[l(M,null,{default:i(()=>[l(P,{modelValue:s(c),"onUpdate:modelValue":a[0]||(a[0]=t=>_(c)?c.value=t:null),location:"top end",variant:"flat",color:"error"},{default:i(()=>[D(" Some Error Occured :( ")]),_:1},8,["modelValue"]),l(P,{modelValue:s(v),"onUpdate:modelValue":a[1]||(a[1]=t=>_(v)?v.value=t:null),location:"top end",variant:"flat",color:"success"},{default:i(()=>[D(" Request Sucessful :) ")]),_:1},8,["modelValue"]),l(j,{cols:"12"},{default:i(()=>[l(W,{title:"Vaccine"},{default:i(()=>[l(U),l(N,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[l(X),e("div",ae,[l(Y,{modelValue:s(b),"onUpdate:modelValue":a[2]||(a[2]=t=>_(b)?b.value=t:null),placeholder:"Search Vaccine",density:"compact",class:"me-3"},null,8,["modelValue"]),l(F,{onClick:a[3]||(a[3]=t=>x.value=!0)},{default:i(()=>[D(" Add Vaccine ")]),_:1})])]),_:1}),l(U),l(Z,{class:"text-no-wrap",height:"23.7rem","fixed-header":""},{default:i(()=>[le,e("tbody",null,[(y(!0),w(L,null,Q(s(m),(t,g)=>(y(),w("tr",{key:t.id},[e("td",null,[e("span",oe,V((s(J)-1)*10+g+1),1)]),e("td",null,[e("span",se,V(t.vaccine_name),1)]),e("td",null,[e("span",ne,V(t.description),1)]),e("td",null,[e("span",re,V(t.day_for_vaccine)+" (Days)",1)]),e("td",ie,[e("span",ce,V(R(t.created_at)),1)]),e("td",ue,[l(q,{color:"error",onClick:r=>$(t.id),size:"24"},{default:i(()=>[D("bx-trash")]),_:2},1032,["onClick"])])]))),128))]),E(e("tfoot",null,[e("tr",null,[s(h)?(y(),w("td",de,[l(H,{size:60,color:"primary",indeterminate:"",class:"my-5"})])):(y(),w("td",pe," No data available "))])],512),[[I,!s(m).length]])]),_:1}),l(U),l(N,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:i(()=>[e("div",me,[ve,l(ee,{modelValue:s(u),"onUpdate:modelValue":a[4]||(a[4]=t=>_(u)?u.value=t:null),density:"compact",class:"per-page-select",variant:"plain",items:[10,20,30,50]},null,8,["modelValue"])]),e("div",fe,[e("span",_e,"Total Data: "+V(s(z)),1)]),e("div",Ve,[l(te,{modelValue:s(f),"onUpdate:modelValue":a[5]||(a[5]=t=>_(f)?f.value=t:null),length:s(p),color:"primary","prev-icon":"mdi-chevron-left","next-icon":"mdi-chevron-right","first-icon":"mdi-chevron-double-left","last-icon":"mdi-chevron-double-right"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1})]),_:1}),l(G,{isDrawerOpen:s(x),"onUpdate:isDrawerOpen":a[6]||(a[6]=t=>_(x)?x.value=t:null),onUserData:T},null,8,["isDrawerOpen"])]))}};export{at as default};
