import{j as u,a2 as F,A as H,y as de,ae as N,o as x,c as y,n as t,w as o,p as s,H as v,G as J,V as P,Q as p,Y as me,l as i,F as L,a as Q,K as pe,L as ce,aH as fe,x as h}from"./main-edf7a918.js";import ve from"./createJobDrawer-14431729.js";import{u as Ve}from"./usejobStore-b9c48a98.js";import{V as be}from"./VDialog-c8000d93.js";import{V as G,d as q}from"./VCard-168b6136.js";import{V as _e,a as ge,b as xe}from"./VToolbarItems-b329ed5c.js";import{V as K}from"./VSpacer-cd3d7120.js";import{V as ye}from"./VForm-3ec30119.js";import{V as R,a as d}from"./VRow-95e48620.js";import{V as w}from"./VTextField-457ca700.js";import{V as M}from"./VSelect-295f5731.js";import{V as Y}from"./VAutocomplete-37f46f35.js";import{V as he}from"./VTextarea-9e000d6d.js";import{V as W}from"./VSnackbar-e7b37846.js";import{V as O}from"./VDivider-1a3d52ac.js";import{V as we}from"./VTable-9e2d2e89.js";import{V as ke}from"./VPagination-efdd592b.js";import"./AppDrawerHeaderSection-db9e3bc1.js";import"./validators-50c95554.js";import"./index-61e4df1a.js";import"./VSwitch-2dd77126.js";import"./VSelectionControl-e31052c4.js";import"./VInput-69f8a183.js";import"./form-130b39c8.js";import"./transition-a51ab259.js";import"./VNavigationDrawer-01c3b33a.js";import"./ssrBoot-b343f022.js";import"./VAvatar-a0e54144.js";import"./VImg-c738de9a.js";import"./forwardRefs-8f7055de.js";/* empty css                   */import"./VField-45dcdeb2.js";import"./easing-6b01f2d6.js";import"./VCounter-4c0bd440.js";import"./VList-c8c5940d.js";import"./dialog-transition-9ffc684e.js";import"./VMenu-2b6a4453.js";import"./VOverlay-729d98f7.js";import"./lazy-21e4bc45.js";import"./VCheckboxBtn-11469801.js";import"./VChip-743205b4.js";import"./filter-83f761c0.js";const Se={class:"app-user-search-filter d-flex align-center"},Ue=i("thead",null,[i("tr",null,[i("th",{scope:"col",style:{"inline-size":"48px"}}," SR. NO. "),i("th",{scope:"col"}," Vaccine Name "),i("th",{scope:"col"}," Description "),i("th",{scope:"col"}," Time "),i("th",{scope:"col"}," Status ")])],-1),Ce={class:"text-capitalize text-base"},De={class:"text-capitalize text-base"},Je=i("td",null,null,-1),ze={class:"text-capitalize text-base"},Te={class:"text-capitalize text-base city-list"},$e={class:"text-capitalize text-high-emphasis"},je={class:"text-base"},qe={class:"text-capitalize text-high-emphasis"},Ee={class:"text-base"},Ie={class:"text-center",style:{"inline-size":"80px"}},Fe={key:0,colspan:"11",class:"text-center text-body-1"},Ne={key:1,colspan:"11",class:"text-center text-body-1"},Pe={class:"d-flex align-center",style:{"inline-size":"171px"}},Re=i("span",{class:"text-no-wrap text-sm me-3"},"Rows per page:",-1),Oe={class:"d-flex align-center"},Ae={class:"text-sm text-no-wrap me-3"},Be={class:"d-flex align-center"},jt={__name:"index",setup(He){const z=Ve(),T=u(""),c=u(10),V=u(1),k=u(1),A=u(1),E=u(0),U=u([]),m=u(!1),b=u(!1),_=u(V.value),f=u(!1);u([]);const B=u([]),C=u([]),$=u([]);u(null);let I=u(!1);const X=a=>{const e={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(a).toLocaleString("en-US",e)},j=(a,e)=>{I.value=!0;const l=a.toString(),g={searchQuery:T.value};z.fetchJobs(l,e,g).then(r=>{U.value=r.data.jobs_data,A.value=r.data.pagination.current_page,k.value=r.data.pagination.last_page,E.value=r.data.pagination.total,r.status===200?b.value=!0:m.value=!0}).catch(r=>{m.value=!0}).finally(()=>I.value=!1)};F(()=>{j(_.value,c.value)}),F(()=>{V.value>k.value&&(V.value=k.value)});const S=u(!1);F(()=>{V.value>k.value&&(V.value=k.value)}),H(()=>{const a=U.value.length?(V.value-1)*c.value+1:0,e=U.value.length+(V.value-1)*c.value;return`${a}-${e} of ${E.value}`});const Z=async a=>{const{skill_id:e,location:l,job_title:g,company_name:r,exp_date:D,salary:se,job_description:ie,experience:ne,designation:re}=a;try{(await z.addJob(e,l,g,r,D,se,ie,ne,re)).status===201?(b.value=!0,S.value=!1,j(_.value,c.value)):m.value=!0}catch{m.value=!0}};H(()=>a=>[{title:"View",value:"view",prependIcon:"bx-show",to:{name:"apps-user-view-id",params:{id:a}}},{title:"Edit",value:"edit",prependIcon:"bx-pencil"},{title:"Delete",value:"delete",prependIcon:"bx-trash-alt"}]);const ee=async a=>{if(confirm("Are you sure you want to delete this Job?"))try{(await z.deleteJob(a)).status===200?(b.value=!0,S.value=!1,j(_.value,c.value)):m.value=!0}catch{m.value=!0}},n=u({job_title:"",skill_id:"",company_name:"",exp_date:"",designation:"",salary:"",job_description:"",experience:"",id:"",location:[]}),te=a=>{n.value={...a},C.value=a.stateName,n.value.location=a.cityId,f.value=!0,fetchSkills(),le()},le=()=>{N.get("/api/web/job/get-states").then(a=>{B.value=a.data.states_data.map(e=>({id:e.id,name:e.name}))}).catch(a=>{console.error("Error fetching states:",a)})};de(C,a=>{a.length>0?(N.get("/api/web/job/get-cities-by-states",{params:{selected_states:a}}).then(e=>{const g=e.data.cities.map(r=>({id:r.id,name:r.name})).filter(r=>n.value.location.some(D=>D==r.id));n.value.location=g.map(r=>r.id)}).catch(e=>{}),ae(a)):($.value=[],n.value.location=[])});const ae=a=>{a.length>0?N.get("/api/web/job/get-cities-by-states",{params:{selected_states:a}}).then(e=>{$.value=e.data.cities.map(l=>({id:l.id,name:l.name}))}).catch(e=>{}):$.value=[]},oe=async()=>{try{(await z.updateJob(n.value)).status===200?(b.value=!0,f.value=!1,j(_.value,c.value)):m.value=!0}catch{m.value=!0}};return(a,e)=>(x(),y("section",null,[t(R,null,{default:o(()=>[t(be,{modelValue:s(f),"onUpdate:modelValue":e[14]||(e[14]=l=>v(f)?f.value=l:null),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition"},{default:o(()=>[t(G,null,{default:o(()=>[t(_e,{dark:"",color:"primary"},{default:o(()=>[t(J,{icon:"",dark:"",onClick:e[0]||(e[0]=l=>f.value=!1)},{default:o(()=>[t(P,null,{default:o(()=>[p("mdi-close")]),_:1})]),_:1}),t(ge,null,{default:o(()=>[p("Edit Job")]),_:1}),t(K),t(xe,null,{default:o(()=>[t(J,{variant:"text",onClick:e[1]||(e[1]=l=>f.value=!1)},{default:o(()=>[p(" cancel ")]),_:1})]),_:1})]),_:1}),t(q,null,{default:o(()=>[t(ye,{ref:"refForm",modelValue:a.isFormValid,"onUpdate:modelValue":e[13]||(e[13]=l=>a.isFormValid=l),onSubmit:me(a.onSubmit,["prevent"])},{default:o(()=>[t(R,null,{default:o(()=>[t(d,{cols:"12",md:"4"},{default:o(()=>[t(w,{modelValue:s(n).job_title,"onUpdate:modelValue":e[2]||(e[2]=l=>s(n).job_title=l),rules:[a.requiredValidator],label:"Job Title"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"4"},{default:o(()=>[t(M,{modelValue:s(n).skill_id,"onUpdate:modelValue":e[3]||(e[3]=l=>s(n).skill_id=l),label:"Select Skill",rules:[a.requiredValidator],items:a.skills,"item-value":"id","item-text":"title"},null,8,["modelValue","rules","items"])]),_:1}),t(d,{cols:"6",md:"4"},{default:o(()=>[t(w,{modelValue:s(n).designation,"onUpdate:modelValue":e[4]||(e[4]=l=>s(n).designation=l),rules:[a.requiredValidator],label:"Job Designation"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"4"},{default:o(()=>[t(w,{modelValue:s(n).salary,"onUpdate:modelValue":e[5]||(e[5]=l=>s(n).salary=l),rules:[a.requiredValidator],label:"Job Salary"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"4"},{default:o(()=>[t(w,{modelValue:s(n).experience,"onUpdate:modelValue":e[6]||(e[6]=l=>s(n).experience=l),rules:[a.requiredValidator],label:"Job Experience"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"4"},{default:o(()=>[t(w,{modelValue:s(n).company_name,"onUpdate:modelValue":e[7]||(e[7]=l=>s(n).company_name=l),rules:[a.requiredValidator],label:"Company"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"4"},{default:o(()=>[t(Y,{modelValue:s(C),"onUpdate:modelValue":e[8]||(e[8]=l=>v(C)?C.value=l:null),items:s(B),"menu-props":{maxHeight:"400"},label:"Select State","item-title":"name","item-value":"id",multiple:"",chips:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"4"},{default:o(()=>[t(Y,{modelValue:s(n).location,"onUpdate:modelValue":e[9]||(e[9]=l=>s(n).location=l),items:s($),"menu-props":{maxHeight:"400"},label:"Select City","item-title":"name","item-value":"id",chips:"",multiple:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"4"},{default:o(()=>[t(w,{type:"date",modelValue:s(n).exp_date,"onUpdate:modelValue":e[10]||(e[10]=l=>s(n).exp_date=l),rules:[a.requiredValidator],label:"Expire Date"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(he,{modelValue:s(n).job_description,"onUpdate:modelValue":e[11]||(e[11]=l=>s(n).job_description=l),rules:[a.requiredValidator],label:"Job Description","auto-grow":""},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(J,{type:"submit",onClick:oe,class:"me-3"},{default:o(()=>[p(" Submit ")]),_:1}),t(J,{type:"reset",variant:"tonal",color:"secondary",onClick:e[12]||(e[12]=l=>f.value=!1)},{default:o(()=>[p(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(W,{modelValue:s(m),"onUpdate:modelValue":e[15]||(e[15]=l=>v(m)?m.value=l:null),location:"top end",variant:"flat",color:"error"},{default:o(()=>[p(" Some Error Occured :( ")]),_:1},8,["modelValue"]),t(W,{modelValue:s(b),"onUpdate:modelValue":e[16]||(e[16]=l=>v(b)?b.value=l:null),location:"top end",variant:"flat",color:"success"},{default:o(()=>[p(" Request Sucessful :) ")]),_:1},8,["modelValue"]),t(d,{cols:"12"},{default:o(()=>[t(G,{title:"Vaccine"},{default:o(()=>[t(q,null,{default:o(()=>[t(R)]),_:1}),t(O),t(q,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[t(K),i("div",Se,[t(w,{modelValue:s(T),"onUpdate:modelValue":e[17]||(e[17]=l=>v(T)?T.value=l:null),placeholder:"Search Jobs",density:"compact",class:"me-3"},null,8,["modelValue"]),t(J,{onClick:e[18]||(e[18]=l=>S.value=!0)},{default:o(()=>[p(" Add Vaccine ")]),_:1})])]),_:1}),t(O),t(we,{class:"text-no-wrap",height:"23.7rem","fixed-header":""},{default:o(()=>[Ue,i("tbody",null,[(x(!0),y(L,null,Q(s(U),(l,g)=>(x(),y("tr",{key:l.id},[i("td",null,[i("span",Ce,h((s(A)-1)*10+g+1),1)]),i("td",null,[i("span",De,h(l.job_title),1)]),Je,i("td",null,[i("span",ze,h(l.company_name),1)]),i("td",null,[i("ul",Te,[(x(!0),y(L,null,Q(l.location,(r,D)=>(x(),y("li",{key:D},h(r),1))),128))])]),i("td",$e,[i("span",je,h(X(l.created_at)),1)]),i("td",qe,[i("span",Ee,h(l.exp_date),1)]),i("td",Ie,[t(P,{color:"error",onClick:r=>ee(l.id),size:"24"},{default:o(()=>[p("bx-trash")]),_:2},1032,["onClick"]),t(P,{color:"primary",onClick:r=>te(l),size:"24"},{default:o(()=>[p("bx-edit")]),_:2},1032,["onClick"])])]))),128))]),pe(i("tfoot",null,[i("tr",null,[s(I)?(x(),y("td",Fe,[t(fe,{size:60,color:"primary",indeterminate:"",class:"my-5"})])):(x(),y("td",Ne," No data available "))])],512),[[ce,!s(U).length]])]),_:1}),t(O),t(q,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:o(()=>[i("div",Pe,[Re,t(M,{modelValue:s(c),"onUpdate:modelValue":e[19]||(e[19]=l=>v(c)?c.value=l:null),density:"compact",class:"per-page-select",variant:"plain",items:[10,20,30,50]},null,8,["modelValue"])]),i("div",Oe,[i("span",Ae,"Total Data: "+h(s(E)),1)]),i("div",Be,[t(ke,{modelValue:s(_),"onUpdate:modelValue":e[20]||(e[20]=l=>v(_)?_.value=l:null),length:s(k),color:"primary","prev-icon":"mdi-chevron-left","next-icon":"mdi-chevron-right","first-icon":"mdi-chevron-double-left","last-icon":"mdi-chevron-double-right"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1})]),_:1}),t(ve,{isDrawerOpen:s(S),"onUpdate:isDrawerOpen":e[21]||(e[21]=l=>v(S)?S.value=l:null),onUserData:Z},null,8,["isDrawerOpen"])]))}};export{jt as default};
