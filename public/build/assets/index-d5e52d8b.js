import{ab as W,ae as U,j as p,a2 as P,A as I,o as k,c as A,n as l,w as r,p as n,H as x,Y as X,K as O,bS as Z,l as a,G as N,Q as _,F as ee,a as te,L as le,x as S,b as q,V as z,D as B}from"./main-edf7a918.js";import ae from"./createRoleDrawer-350cfee8.js";import{V as oe}from"./VDialog-c8000d93.js";import{V as L,d as T}from"./VCard-168b6136.js";import{V as se}from"./VForm-3ec30119.js";import{V as M,a as D}from"./VRow-95e48620.js";import{V as $}from"./VTextField-457ca700.js";import{V as Q}from"./VSnackbar-e7b37846.js";import{V as F}from"./VDivider-1a3d52ac.js";import{V as re}from"./VSpacer-cd3d7120.js";import{V as ne}from"./VTable-9e2d2e89.js";import{V as ue}from"./VSelect-295f5731.js";import{V as ie}from"./VPagination-efdd592b.js";import"./AppDrawerHeaderSection-db9e3bc1.js";import"./validators-50c95554.js";import"./index-61e4df1a.js";import"./VNavigationDrawer-01c3b33a.js";import"./ssrBoot-b343f022.js";import"./VAvatar-a0e54144.js";import"./VImg-c738de9a.js";import"./transition-a51ab259.js";import"./form-130b39c8.js";import"./forwardRefs-8f7055de.js";/* empty css                   */import"./VField-45dcdeb2.js";import"./VInput-69f8a183.js";import"./easing-6b01f2d6.js";import"./VCounter-4c0bd440.js";import"./VList-c8c5940d.js";import"./dialog-transition-9ffc684e.js";import"./VMenu-2b6a4453.js";import"./VOverlay-729d98f7.js";import"./lazy-21e4bc45.js";import"./VCheckboxBtn-11469801.js";import"./VSelectionControl-e31052c4.js";import"./VChip-743205b4.js";const de=W("createRole",{actions:{fetchRoles(c,u,i){return new Promise((o,f)=>{U.get(`/api/web/all-roles/${u}/?page=${c}`,{params:i}).then(d=>o(d)).catch(d=>f(d))})},addRole(c,u,i,o){return new Promise((f,d)=>{U.post("/api/web/create-role",{name:c,email:u,password:i,role:o}).then(h=>f(h)).catch(h=>d(h))})},deleteRole(c){return new Promise((u,i)=>{U.delete(`/api/web/role/delete/${c}`).then(o=>u(o)).catch(o=>i(o))})},updateRole(c){return new Promise((u,i)=>{U.put(`/api/web/update-role/${c.id}`,c).then(o=>u(o)).catch(o=>i(o))})},fetchUser(c){return new Promise((u,i)=>{U.get(`/apps/users/${c}`).then(o=>u(o)).catch(o=>i(o))})}}});const me={class:"app-user-search-filter d-flex align-center"},pe=a("thead",null,[a("tr",null,[a("th",{scope:"col",style:{width:"48px"}}," Sr. No. "),a("th",{scope:"col"}," NAME "),a("th",{scope:"col"}," EMAIL "),a("th",{scope:"col"}," ROLE "),a("th",{scope:"col"}," CREATED DATE "),a("th",{scope:"col"}," ACTIONS ")])],-1),ce={class:"text-capitalize text-base"},fe={class:"text-capitalize text-base"},ve={class:"text-base"},Ve={class:"text-base"},he={class:"text-capitalize text-high-emphasis"},ge={class:"text-base"},we={class:"text-center",style:{width:"80px"}},xe=a("tr",null,[a("td",{colspan:"7",class:"text-center text-body-1"}," No data available ")],-1),_e=[xe],be={class:"d-flex align-center",style:{width:"171px"}},ye=a("span",{class:"text-no-wrap text-sm me-3"},"Rows per page:",-1),Re={class:"d-flex align-center"},Se={class:"text-sm text-no-wrap me-3"},De={class:"d-flex align-center"},it={__name:"index",setup(c){const u=de(),i=p(""),o=p(10),f=p(1),d=p(1),h=p(0),C=p([]),v=p(!1),g=p(!1),w=p(f.value),b=p(!1),j=s=>{const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(s).toLocaleString("en-US",t)},E=(s,t)=>{const e=s.toString(),R={searchQuery:i.value};u.fetchRoles(e,t,R).then(V=>{C.value=V.data.roles_data.data,d.value=V.data.roles_data.last_page,h.value=V.data.roles_data.total,V.status===200?g.value=!0:v.value=!0}).catch(V=>{v.value=!0})};P(()=>{E(w.value,o.value)}),P(()=>{f.value>d.value&&(f.value=d.value)});const y=p(!1);P(()=>{f.value>d.value&&(f.value=d.value)}),I(()=>{const s=C.value.length?(f.value-1)*o.value+1:0,t=C.value.length+(f.value-1)*o.value;return`${s}-${t} of ${h.value}`});const G=async s=>{const{name:t,email:e,password:R,role:V}=s;console.log(t,e,R,V);try{(await u.addRole(t,e,R,V)).status===201?(g.value=!0,y.value=!1,E(w.value,o.value)):v.value=!0}catch{v.value=!0}};I(()=>s=>[{title:"Edit",value:"edit",prependIcon:"bx-pencil",to:{name:"apps-user-view-id",params:{id:s}}},{title:"Delete",value:"delete",prependIcon:"bx-trash-alt"}]);const m=p({role_title:"",description:"",id:""}),H=s=>{m.value={...s},b.value=!0},J=async()=>{try{(await u.updateRole(m.value)).status===200?(g.value=!0,b.value=!1,E(w.value,o.value)):v.value=!0}catch{v.value=!0}},K=async s=>{if(confirm("Are you sure you want to delete this role?"))try{(await u.deleteRole(s)).status===200?(g.value=!0,y.value=!1,E(w.value,o.value)):v.value=!0}catch{v.value=!0}};return(s,t)=>(k(),A("section",null,[l(M,null,{default:r(()=>[l(oe,{modelValue:n(b),"onUpdate:modelValue":t[7]||(t[7]=e=>x(b)?b.value=e:null),width:"auto"},{default:r(()=>[l(L,null,{default:r(()=>[l(T,null,{default:r(()=>[l(se,{ref:"refForm",modelValue:s.isFormValid,"onUpdate:modelValue":t[6]||(t[6]=e=>s.isFormValid=e),onSubmit:X(s.onSubmit,["prevent"])},{default:r(()=>[l(M,null,{default:r(()=>[l(D,{cols:"12"},{default:r(()=>[l($,{modelValue:n(m).name,"onUpdate:modelValue":t[0]||(t[0]=e=>n(m).name=e),rules:[s.requiredValidator],label:"Name"},null,8,["modelValue","rules"])]),_:1}),l(D,{cols:"12"},{default:r(()=>[l($,{modelValue:n(m).email,"onUpdate:modelValue":t[1]||(t[1]=e=>n(m).email=e),rules:[s.requiredValidator],label:"Email"},null,8,["modelValue","rules"])]),_:1}),l(D,{cols:"12"},{default:r(()=>[l($,{modelValue:n(m).password,"onUpdate:modelValue":t[2]||(t[2]=e=>n(m).password=e),rules:[s.requiredValidator],label:"Password"},null,8,["modelValue","rules"])]),_:1}),l(D,{cols:"12"},{default:r(()=>[l($,{modelValue:n(m).role,"onUpdate:modelValue":t[3]||(t[3]=e=>n(m).role=e),rules:[s.requiredValidator],label:"Role"},null,8,["modelValue","rules"])]),_:1}),O(a("input",{type:"hidden","onUpdate:modelValue":t[4]||(t[4]=e=>n(m).id=e)},null,512),[[Z,n(m).id]]),l(D,{cols:"12"},{default:r(()=>[l(N,{type:"submit",onClick:J,class:"me-3"},{default:r(()=>[_(" Submit ")]),_:1}),l(N,{type:"reset",variant:"tonal",color:"secondary",onClick:t[5]||(t[5]=e=>b.value=!1)},{default:r(()=>[_(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Q,{modelValue:n(v),"onUpdate:modelValue":t[8]||(t[8]=e=>x(v)?v.value=e:null),location:"top end",variant:"flat",color:"error"},{default:r(()=>[_(" Some Error Occured :( ")]),_:1},8,["modelValue"]),l(Q,{modelValue:n(g),"onUpdate:modelValue":t[9]||(t[9]=e=>x(g)?g.value=e:null),location:"top end",variant:"flat",color:"success"},{default:r(()=>[_(" Request Sucessful :) ")]),_:1},8,["modelValue"]),l(D,{cols:"12"},{default:r(()=>[l(L,{title:"All Roles"},{default:r(()=>[l(F),l(T,{class:"d-flex flex-wrap gap-4"},{default:r(()=>[l(re),a("div",me,[l($,{modelValue:n(i),"onUpdate:modelValue":t[10]||(t[10]=e=>x(i)?i.value=e:null),placeholder:"Search Role",density:"compact",class:"me-3"},null,8,["modelValue"]),l(N,{onClick:t[11]||(t[11]=e=>y.value=!0)},{default:r(()=>[_(" Add Role ")]),_:1})])]),_:1}),l(F),l(ne,{class:"text-no-wrap",height:"27rem","fixed-header":""},{default:r(()=>[pe,a("tbody",null,[(k(!0),A(ee,null,te(n(C),(e,R)=>(k(),A("tr",{key:e.id},[a("td",null,[a("span",ce,S(R+1),1)]),a("td",null,[a("span",fe,S(e.name),1)]),a("td",null,[a("span",ve,S(e.email),1)]),a("td",null,[a("span",Ve,S(e.role),1)]),a("td",he,[a("span",ge,S(j(e.created_at)),1)]),a("td",we,[e.id!=1?(k(),q(z,{key:0,onClick:V=>K(e.id),color:"error",size:"24"},{default:r(()=>[_(" bx-trash ")]),_:2},1032,["onClick"])):B("",!0),e.id!=1?(k(),q(z,{key:1,color:"primary",onClick:V=>H(e),size:"24"},{default:r(()=>[_("bx-edit")]),_:2},1032,["onClick"])):B("",!0)])]))),128))]),O(a("tfoot",null,_e,512),[[le,!n(C).length]])]),_:1}),l(F),l(T,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:r(()=>[a("div",be,[ye,l(ue,{modelValue:n(o),"onUpdate:modelValue":t[12]||(t[12]=e=>x(o)?o.value=e:null),density:"compact",class:"per-page-select",variant:"plain",items:[10,20,30,50]},null,8,["modelValue"])]),a("div",Re,[a("span",Se,"Total Data: "+S(n(h)),1)]),a("div",De,[l(ie,{modelValue:n(w),"onUpdate:modelValue":t[13]||(t[13]=e=>x(w)?w.value=e:null),length:n(d),color:"primary","prev-icon":"mdi-chevron-left","next-icon":"mdi-chevron-right","first-icon":"mdi-chevron-double-left","last-icon":"mdi-chevron-double-right"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1})]),_:1}),l(ae,{isDrawerOpen:n(y),"onUpdate:isDrawerOpen":t[14]||(t[14]=e=>x(y)?y.value=e:null),onUserData:G},null,8,["isDrawerOpen"])]))}};export{it as default};
