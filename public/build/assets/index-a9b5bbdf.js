import{j as i,ad as W,ae as F,a2 as D,A as M,y as X,o as S,c as A,n as a,w as s,p as n,H as h,Y as Z,K as j,bS as ee,l as t,G as z,Q as L,F as O,a as J,L as te,x as d,r as ae}from"./main-edf7a918.js";import{u as le}from"./useUserListStore-42ed9a30.js";import{V as se}from"./VDialog-c8000d93.js";import{V as E,d as y}from"./VCard-168b6136.js";import{V as oe}from"./VForm-3ec30119.js";import{V as N,a as w}from"./VRow-95e48620.js";import{V as P}from"./VTextField-457ca700.js";import{V as $}from"./VSnackbar-e7b37846.js";import{V as k}from"./VDivider-1a3d52ac.js";import{V as ne}from"./VSpacer-cd3d7120.js";import{V as ie}from"./VTable-9e2d2e89.js";import{V as re}from"./VSelect-295f5731.js";import{V as de}from"./VPagination-efdd592b.js";import{V as ue}from"./VAvatar-a0e54144.js";import"./VOverlay-729d98f7.js";import"./lazy-21e4bc45.js";import"./easing-6b01f2d6.js";import"./transition-a51ab259.js";import"./forwardRefs-8f7055de.js";import"./dialog-transition-9ffc684e.js";import"./VImg-c738de9a.js";import"./form-130b39c8.js";/* empty css                   */import"./VField-45dcdeb2.js";import"./VInput-69f8a183.js";import"./VCounter-4c0bd440.js";import"./VList-c8c5940d.js";import"./VMenu-2b6a4453.js";import"./VCheckboxBtn-11469801.js";import"./VSelectionControl-e31052c4.js";import"./VChip-743205b4.js";const ce={class:"d-flex align-center gap-2"},pe={class:"text-h6"},me={class:"app-user-search-filter d-flex align-center"},fe=t("thead",null,[t("tr",null,[t("th",{scope:"col"}," SR. NO. "),t("th",{scope:"col"}," NAME "),t("th",{scope:"col"}," DOB "),t("th",{scope:"col"}," EMAIL "),t("th",{scope:"col"}," PHONE NUMBER "),t("th",{scope:"col"}," LOCATION "),t("th",{scope:"col"}," CREATED AT ")])],-1),he={class:"text-capitalize text-base"},ve={class:"text-capitalize text-high-emphasis"},_e={class:"text-capitalize text-base"},ge={class:"text-capitalize text-high-emphasis"},Ve={class:"text-base"},xe={class:"text-high-emphasis"},be={class:"text-base"},ye={class:"text-capitalize text-high-emphasis"},we={class:"text-base"},Ue={class:"text-base text-high-emphasis"},Se={class:"text-center"},Ae={class:"text-center text-high-emphasis"},Le=t("tr",null,[t("td",{colspan:"7",class:"text-center text-body-1"}," No data available ")],-1),Re=[Le],De={class:"d-flex align-center",style:{"inline-size":"171px"}},Ee=t("span",{class:"text-no-wrap text-sm me-3"},"Rows per page:",-1),Ne={class:"d-flex align-center"},Pe={class:"text-sm text-no-wrap me-3"},ke={class:"d-flex align-center"},ft={__name:"index",setup(Ce){const Q=le(),U=i(""),c=i(15),p=i(1),C=i(1),f=i(1),R=i(0),v=i([]),_=i(!1),m=i(!1),g=i(!1),V=i(p.value),q=o=>{const l={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(o).toLocaleString("en-US",l)};JSON.parse(localStorage.getItem("userData")||"{}").role;const I="pageReloaded";localStorage.getItem(I)||(localStorage.setItem(I,"true"),location.reload()),W(()=>{H()});const H=async()=>{try{const l=(await F.get("/api/web/dashboard_details")).data,b=l.jobApplications,e=l.listedJobs,r=l.listedRoles,Y=l.allUsers;x[0].stats=b.toString(),x[1].stats=e.toString(),x[2].stats=r.toString(),x[3].stats=Y.toString()}catch(o){console.error("Error fetching dynamic values:",o)}},T=(o,l)=>{const b=o.toString(),e={searchQuery:U.value};Q.fetchUsers(b,l,e).then(r=>{v.value=r.data.users_data.data,C.value=r.data.users_data.current_page,f.value=r.data.users_data.last_page,R.value=r.data.users_data.total,r.status===200?g.value=!0:m.value=!0}).catch(r=>{m.value=!0})};D(()=>{T(V.value,c.value)}),D(()=>{p.value>f.value&&(p.value=f.value)}),i(!1),D(()=>{p.value>f.value&&(p.value=f.value)}),M(()=>{const o=v.value.length?(p.value-1)*c.value+1:0,l=v.value.length+(p.value-1)*c.value;return`${o}-${l} of ${R.value}`});const B=i([]),K=i(!1);X(B,()=>{B.value.length||(K.value=!1)},{deep:!0}),M(()=>o=>[{title:"View",value:"view",prependIcon:"bx-show",to:{name:"apps-user-view-id",params:{id:o}}},{title:"Edit",value:"edit",prependIcon:"bx-pencil"},{title:"Delete",value:"delete",prependIcon:"bx-trash-alt"}]);const u=i({}),G=()=>{F.patch(`/api/web/user/update/${u.value.id}`,u.value).then(o=>{o.user,o.status===200?(g.value=!0,_.value=!1,T(V.value,c.value)):m.value=!0}).catch(o=>{m.value=!0})},x=[{icon:"bx-objects-vertical-bottom",color:"primary",title:"Job Application",stats:"Loading..."},{icon:"bx-doughnut-chart",color:"error",title:"Listed Jobs",stats:"Loading..."},{icon:"bx-color",color:"success",title:"Listed skills",stats:"Loading..."},{icon:"bx-user-circle",color:"warning",title:"All App Users",stats:"Loading..."}];return(o,l)=>{const b=ae("RouterLink");return S(),A("section",null,[a(N,null,{default:s(()=>[a(se,{modelValue:n(_),"onUpdate:modelValue":l[5]||(l[5]=e=>h(_)?_.value=e:null),width:"auto"},{default:s(()=>[a(E,null,{default:s(()=>[a(y,null,{default:s(()=>[a(oe,{ref:"refForm",modelValue:o.isFormValid,"onUpdate:modelValue":l[4]||(l[4]=e=>o.isFormValid=e),onSubmit:Z(o.onSubmit,["prevent"])},{default:s(()=>[a(N,null,{default:s(()=>[a(w,{cols:"12"},{default:s(()=>[a(P,{modelValue:n(u).name,"onUpdate:modelValue":l[0]||(l[0]=e=>n(u).name=e),rules:[o.requiredValidator],label:"User Name"},null,8,["modelValue","rules"])]),_:1}),a(w,{cols:"12"},{default:s(()=>[a(P,{modelValue:n(u).phone_number,"onUpdate:modelValue":l[1]||(l[1]=e=>n(u).phone_number=e),rules:[o.requiredValidator],label:"User Phone"},null,8,["modelValue","rules"])]),_:1}),j(t("input",{type:"hidden","onUpdate:modelValue":l[2]||(l[2]=e=>n(u).id=e)},null,512),[[ee,n(u).id]]),a(w,{cols:"12"},{default:s(()=>[a(z,{type:"submit",onClick:G,class:"me-3"},{default:s(()=>[L(" Submit ")]),_:1}),a(z,{type:"reset",variant:"tonal",color:"secondary",onClick:l[3]||(l[3]=e=>_.value=!1)},{default:s(()=>[L(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:n(m),"onUpdate:modelValue":l[6]||(l[6]=e=>h(m)?m.value=e:null),location:"top end",variant:"flat",color:"error"},{default:s(()=>[L(" Phone Number Already Exists :( ")]),_:1},8,["modelValue"]),a($,{modelValue:n(g),"onUpdate:modelValue":l[7]||(l[7]=e=>h(g)?g.value=e:null),location:"top end",variant:"flat",color:"success"},{default:s(()=>[L(" Request Sucessful :) ")]),_:1},8,["modelValue"]),(S(),A(O,null,J(x,e=>a(w,{key:e.title,cols:"12",sm:"6",lg:"3"},{default:s(()=>[a(E,null,{default:s(()=>[a(y,{class:"d-flex justify-space-between"},{default:s(()=>[t("div",null,[t("span",null,d(e.title),1),t("div",ce,[t("h6",pe,d(e.stats),1)])]),a(ue,{rounded:"",variant:"tonal",color:e.color,icon:e.icon},null,8,["color","icon"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),64)),a(w,{cols:"12"},{default:s(()=>[a(E,{title:"App Users"},{default:s(()=>[a(y,null,{default:s(()=>[a(N)]),_:1}),a(k),a(y,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[a(ne),t("div",me,[a(P,{modelValue:n(U),"onUpdate:modelValue":l[8]||(l[8]=e=>h(U)?U.value=e:null),placeholder:"Search User",density:"compact",class:"me-3"},null,8,["modelValue"])])]),_:1}),a(k),t("div",null,[a(ie,{class:"text-no-wrap",height:"23.7rem","fixed-header":""},{default:s(()=>[fe,t("tbody",null,[(S(!0),A(O,null,J(n(v),(e,r)=>(S(),A("tr",{key:e.id},[t("td",null,[t("span",he,d((n(C)-1)*10+r+1),1)]),t("td",ve,[a(b,{to:{name:"apps-user-view-id",params:{id:e.id}}},{default:s(()=>[t("span",_e,d(e.name),1)]),_:2},1032,["to"])]),t("td",ge,[t("span",Ve,d(e.dob),1)]),t("td",xe,[t("span",be,d(e.email),1)]),t("td",ye,[t("span",we,d(e.phone_number),1)]),t("td",null,[t("span",Ue,d(e.location),1)]),t("td",Se,[t("span",Ae,d(q(e.created_at)),1)])]))),128))]),j(t("tfoot",null,Re,512),[[te,!n(v).length]])]),_:1})]),a(k),a(y,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:s(()=>[t("div",De,[Ee,a(re,{modelValue:n(c),"onUpdate:modelValue":l[9]||(l[9]=e=>h(c)?c.value=e:null),density:"compact",class:"per-page-select",variant:"plain",items:[15,20,30,50]},null,8,["modelValue"])]),t("div",Ne,[t("span",Pe,"Total Data: "+d(n(R)),1)]),t("div",ke,[a(de,{modelValue:n(V),"onUpdate:modelValue":l[10]||(l[10]=e=>h(V)?V.value=e:null),length:n(f),color:"primary","prev-icon":"mdi-chevron-left","next-icon":"mdi-chevron-right","first-icon":"mdi-chevron-double-left","last-icon":"mdi-chevron-double-right"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1})]),_:1})])}}};export{ft as default};
